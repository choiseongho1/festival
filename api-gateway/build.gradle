plugins {
    id 'org.springframework.boot' version '3.1.5' // 적절한 버전으로 변경
    id 'io.spring.dependency-management' version '1.1.0'
    id 'java'
}

group = 'com.festival'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = '17'

repositories {
    mavenCentral()
    maven { url 'https://repo.spring.io/release' }
}

ext {
    set('springCloudVersion', "2022.0.3") // Spring Boot 3.x에 호환되는 Spring Cloud 버전
}

dependencies {
    // 기본 스프링 부트 의존성
    implementation 'org.springframework.boot:spring-boot-starter'

    // API Gateway (Spring Cloud Gateway)
    implementation 'org.springframework.cloud:spring-cloud-starter-gateway'

    // Eureka Client 의존성
    implementation 'org.springframework.cloud:spring-cloud-starter-netflix-eureka-client'

    // Spring Boot WebFlux (Reactive)
    implementation 'org.springframework.boot:spring-boot-starter-webflux'

    // Actuator (서버 모니터링 및 관리)
    implementation 'org.springframework.boot:spring-boot-starter-actuator'

    // OpenFeign - 다른 마이크로서비스와 통신
    implementation 'org.springframework.cloud:spring-cloud-starter-openfeign'

    // RabbitMQ 의존성 (필요 시 사용)
    implementation 'org.springframework.boot:spring-boot-starter-amqp'

    // Micrometer Tracing (Sleuth 대체)
    implementation 'io.micrometer:micrometer-tracing-bridge-brave'
    implementation 'io.zipkin.reporter2:zipkin-reporter-brave'

    // Lombok (코드 간소화)
    compileOnly 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'

    // 테스트 의존성
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
}

dependencyManagement {
    imports {
        mavenBom "org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}"
    }
}
